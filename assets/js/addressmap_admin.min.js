jQuery(document).ready(function(){function a(){d=new google.maps.Geocoder;var a=new google.maps.LatLng(-34.397,150.644),b={zoom:15,center:a,mapTypeId:google.maps.MapTypeId.ROADMAP};e=new google.maps.Map(document.getElementById("map"),b),google.maps.event.addListener(e,"click",function(){g.close()}),c(d,e)}function b(a){d.geocode({latLng:a},function(a){a&&a.length>0?f.formatted_address=a[0].formatted_address:f.formatted_address="Cannot determine address at this location.",g.setContent(f.formatted_address+"<br>coordinates: "+f.getPosition().toUrlValue(6)),g.open(e,f);var b=["streetAddress","addressLocality","addressRegion","postalCode","addressCountry"];console.log(a);for(var c=["route","sublocality_level_3","sublocality_level_2","sublocality_level_1","administrative_area_level_2","administrative_area_level_1","country","postal_code"],d=0;d<b.length;d++){var h="";if("streetAddress"===b[d])for(var i=0;i<a[0].address_components.length;i++)(a[0].address_components[i].types[0]===c[0]||a[0].address_components[i].types[0]===c[1]||a[0].address_components[i].types[0]===c[2])&&(h=h+a[0].address_components[i].long_name+", ");if("addressLocality"===b[d])for(var i=0;i<a[0].address_components.length;i++)(a[0].address_components[i].types[0]===c[3]||a[0].address_components[i].types[0]===c[4])&&(h=h+a[0].address_components[i].long_name+", ");if("addressRegion"===b[d])for(var i=0;i<a[0].address_components.length;i++)a[0].address_components[i].types[0]===c[5]&&(h=a[0].address_components[i].long_name);if("postalCode"===b[d])for(var i=0;i<a[0].address_components.length;i++)a[0].address_components[i].types[0]===c[7]&&(h=a[0].address_components[i].long_name);if("addressCountry"===b[d])for(var i=0;i<a[0].address_components.length;i++)a[0].address_components[i].types[0]===c[6]&&(h=a[0].address_components[i].long_name);jQuery('input[name="restaurant_add['+b[d]+']"]').val(h)}})}function c(){var a=document.getElementById("map_address").value;d.geocode({address:a},function(c,d){d==google.maps.GeocoderStatus.OK?(e.setCenter(c[0].geometry.location),f&&(f.setMap(null),g&&g.close()),f=new google.maps.Marker({map:e,draggable:!0,position:c[0].geometry.location}),google.maps.event.addListener(f,"dragend",function(){b(f.getPosition())}),google.maps.event.addListener(f,"click",function(){f.formatted_address?g.setContent(f.formatted_address+"<br>coordinates: "+f.getPosition().toUrlValue(6)):g.setContent(a+"<br>coordinates: "+f.getPosition().toUrlValue(6)),g.open(e,f)}),google.maps.event.trigger(f,"click")):alert("Geocode was not successful for the following reason: "+d)})}a();var d,e,f,g=new google.maps.InfoWindow({size:new google.maps.Size(150,50)})});